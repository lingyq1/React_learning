# 关于 react应用的构建逻辑

1. 把需求设计成UI,UI分成有层级的组件
> 根据单一功能原则来判定组件的范围，即一个组件原则只能负责一个功能，如需更多功能，则继续拆分为更小的组件。

2. 找到并创建 react state的最小（且完整）表示。
> 通过问自己以下三个问题，你可以逐个检查相应数据是否属于 state：

- 该数据是否是由父组件通过 props 传递而来的？如果是，那它应该不是 state。
- 该数据是否随时间的推移而保持不变？如果是，那它应该也不是 state。
- 你能否根据其他 state 或 props 计算出该数据的值？如果是，那它也不是 state。

3. 确定state放的位置
> React 中的数据流是单向的，并顺着组件层级从上往下传递。
知道 需要state渲染数据的所有组件，找到层级最高的组件（共有者）。如果找不到合适的组件放置state,可以创建一个新的组件放置state，该组件层级为最高。

> 对于大型的复杂应用，应该使用从下到上的方式，即先编写层级最低的组件。
对于简单的应用，使用从上到下的方式，即先编写层级高的组件。

4. 添加反向数据流
> 有的需求需要数据反向传递，低层级组件更新高层级的state。例如表单的input输入数据，应用并不会重新渲染。因为state只能由拥有它们是组件去更改，所以高层级组件必须将一个能触发state改变的回调函数传递给子组件.
> 对于输入框，可以使用onChange事件来监听用户输入的变化，并通知父组件传递给 SearchBar子组件的回调函数，然后该回调函数会调用setState(),更新state，从而重新渲染应用。